<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إمساكية رمضان 2026 والسبحة</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide-static/0.321.0/lucide.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        body { font-family: 'Cairo', sans-serif; background-color: #050B18; color: white; overflow-x: hidden; }
        .glass { background: rgba(10, 18, 36, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(255,255,255,0.1); }
        .tab-active { background: rgba(245, 158, 11, 0.15); color: #f59e0b; border: 1px solid rgba(245, 158, 11, 0.3); }
        .hidden-section { display: none; }
        .tasbih-card { transition: all 0.2s ease; border: 1px solid rgba(255,255,255,0.05); cursor: pointer; }
        .tasbih-card:active { transform: scale(0.95); background: rgba(245, 158, 11, 0.1); }
    </style>
</head>
<body class="pb-20">

    <audio id="athan-audio" preload="auto">
        <source src="adhan.mp3" type="audio/mpeg">
    </audio>

    <div id="audio-overlay" class="fixed inset-0 z-[200] flex items-center justify-center bg-black/95">
        <div class="text-center p-8 bg-[#0A1224] rounded-[2.5rem] border border-amber-500/30 max-w-sm mx-4">
            <i data-lucide="moon-star" class="text-amber-500 w-16 h-16 mx-auto mb-6"></i>
            <h2 class="text-2xl font-bold mb-4 text-amber-500">رمضان 2026</h2>
            <p class="text-white/70 mb-8 text-sm">اضغط للتفعيل لضمان عمل الأذان والعداد التنازلي والسبحة.</p>
            <button onclick="enableAudioAndStart()" class="w-full py-4 bg-amber-500 text-[#050B18] font-black rounded-2xl text-lg hover:bg-amber-400">تفعيل ودخول</button>
        </div>
    </div>

    <header class="sticky top-0 p-4 flex justify-between items-center glass z-[150]">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center"><i data-lucide="layout-grid" class="text-[#050B18]"></i></div>
            <h1 class="text-lg font-bold text-amber-500">فانوس رمضان</h1>
        </div>
        <div class="flex items-center gap-2">
            <button id="stop-btn" onclick="stopAthan()" class="hidden bg-red-500/20 text-red-400 border border-red-500/30 px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1">
                <i data-lucide="volume-x" class="w-4 h-4"></i> إيقاف
            </button>
            <button onclick="testAthan()" class="bg-amber-500/10 text-amber-500 border border-amber-500/20 px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1">
                <i data-lucide="play" class="w-4 h-4"></i> تجربة
            </button>
            <div id="live-clock" class="text-lg font-mono font-bold text-amber-400 ml-2">00:00:00</div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto p-4 space-y-6">
        <section class="rounded-[2.5rem] bg-[#0A1224] border border-white/5 p-8 text-center shadow-2xl">
            <div class="text-amber-400 text-sm font-bold mb-2 uppercase tracking-widest">المتبقي لأذان <span id="prayer-name">--</span></div>
            <h2 id="countdown-timer" class="text-6xl md:text-8xl font-black font-mono mb-2 text-white">00:00:00</h2>
            <div id="next-prayer-time" class="text-white/40 text-sm font-mono bg-white/5 inline-block px-4 py-1 rounded-full">موعد الصلاة: --:--</div>
        </section>

<div class="flex p-1 bg-white/5 rounded-2xl border border-white/10">
    <button onclick="switchTab('imsakia')" id="tab-imsakia" class="flex-1 py-3 rounded-xl tab-active font-bold transition-all flex items-center justify-center gap-2">
        <i data-lucide="calendar-days" class="w-5 h-5"></i> الجدول
    </button>
    
    <button onclick="switchTab('quran')" id="tab-quran" class="flex-1 py-3 rounded-xl text-white/40 font-bold transition-all flex items-center justify-center gap-2">
        <i data-lucide="book-open" class="w-5 h-5"></i> القرآن
    </button>

    <button onclick="switchTab('subha')" id="tab-subha" class="flex-1 py-3 rounded-xl text-white/40 font-bold transition-all flex items-center justify-center gap-2">
        <i data-lucide="fingerprint" class="w-5 h-5"></i> السبحة
    </button>
</div>

        <div id="content-imsakia" class="bg-[#0A1224] rounded-[2rem] border border-white/5 overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full text-center text-[10px] md:text-xs">
                    <thead class="bg-white/10 text-amber-500 font-bold">
                        <tr>
                            <th class="p-3">رمضان</th>
                            <th class="p-3">التاريخ</th>
                            <th class="p-3">الإمساك</th>
                            <th class="p-3">الفجر</th>
                            <th class="p-3">الشروق</th>
                            <th class="p-3">الظهر</th>
                            <th class="p-3">المغرب</th>
                            <th class="p-3">منتصف الليل </th>
                        </tr>
                    </thead>
                    <tbody id="imsakia-body" class="divide-y divide-white/5 text-white/70"></tbody>
                </table>
            </div>
        </div>

        <div id="content-subha" class="hidden-section space-y-4">
            <div id="subha-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            <button onclick="resetTasbih()" class="w-full py-4 text-white/20 text-xs hover:text-red-400">تصفير العدادات</button>
        </div>
    </main>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        // البيانات المستخرجة من ملف PDF المرفق 
        const imsakiaData = [
            { day: 1, date: '19 شباط', mDate: '2026-02-19', imsak: '5:09', fajr: '5:19', sunrise: '6:42', dhuhr: '12:17', maghrib: '6:07', midnight: '11:35' },
            { day: 2, date: '20 شباط', mDate: '2026-02-20', imsak: '5:08', fajr: '5:18', sunrise: '6:41', dhuhr: '12:16', maghrib: '6:07', midnight: '11:35' },
            { day: 3, date: '21 شباط', mDate: '2026-02-21', imsak: '5:07', fajr: '5:17', sunrise: '6:40', dhuhr: '12:16', maghrib: '6:08', midnight: '11:35' },
            { day: 4, date: '22 شباط', mDate: '2026-02-22', imsak: '5:06', fajr: '5:16', sunrise: '6:39', dhuhr: '12:16', maghrib: '6:09', midnight: '11:35' },
            { day: 5, date: '23 شباط', mDate: '2026-02-23', imsak: '5:05', fajr: '5:15', sunrise: '6:38', dhuhr: '12:16', maghrib: '6:10', midnight: '11:35' },
            { day: 6, date: '24 شباط', mDate: '2026-02-24', imsak: '5:04', fajr: '5:14', sunrise: '6:37', dhuhr: '12:16', maghrib: '6:11', midnight: '11:35' },
            { day: 7, date: '25 شباط', mDate: '2026-02-25', imsak: '5:03', fajr: '5:13', sunrise: '6:36', dhuhr: '12:16', maghrib: '6:11', midnight: '11:35' },
            { day: 8, date: '26 شباط', mDate: '2026-02-26', imsak: '5:02', fajr: '5:12', sunrise: '6:35', dhuhr: '12:16', maghrib: '6:12', midnight: '11:35' },
            { day: 9, date: '27 شباط', mDate: '2026-02-27', imsak: '5:01', fajr: '5:11', sunrise: '6:34', dhuhr: '12:15', maghrib: '6:13', midnight: '11:35' },
            { day: 10, date: '28 شباط', mDate: '2026-02-28', imsak: '5:00', fajr: '5:10', sunrise: '6:32', dhuhr: '12:15', maghrib: '6:14', midnight: '11:35' },
            { day: 11, date: '1 آذار', mDate: '2026-03-01', imsak: '4:58', fajr: '5:08', sunrise: '6:30', dhuhr: '12:15', maghrib: '6:15', midnight: '11:34' },
            { day: 12, date: '2 آذار', mDate: '2026-03-02', imsak: '4:57', fajr: '5:07', sunrise: '6:29', dhuhr: '12:15', maghrib: '6:16', midnight: '11:34' },
            { day: 13, date: '3 آذار', mDate: '2026-03-03', imsak: '4:56', fajr: '5:06', sunrise: '6:28', dhuhr: '12:15', maghrib: '6:17', midnight: '11:34' },
            { day: 14, date: '4 آذار', mDate: '2026-03-04', imsak: '4:54', fajr: '5:04', sunrise: '6:27', dhuhr: '12:14', maghrib: '6:18', midnight: '11:34' },
            { day: 15, date: '5 آذار', mDate: '2026-03-05', imsak: '4:53', fajr: '5:03', sunrise: '6:25', dhuhr: '12:14', maghrib: '6:18', midnight: '11:33' },
            { day: 16, date: '6 آذار', mDate: '2026-03-06', imsak: '4:52', fajr: '5:02', sunrise: '6:24', dhuhr: '12:14', maghrib: '6:19', midnight: '11:33' },
            { day: 17, date: '7 آذار', mDate: '2026-03-07', imsak: '4:51', fajr: '5:01', sunrise: '6:23', dhuhr: '12:14', maghrib: '6:20', midnight: '11:33' },
            { day: 18, date: '8 آذار', mDate: '2026-03-08', imsak: '4:50', fajr: '5:00', sunrise: '6:22', dhuhr: '12:13', maghrib: '6:21', midnight: '11:33' },
            { day: 19, date: '9 آذار', mDate: '2026-03-09', imsak: '4:48', fajr: '4:58', sunrise: '6:21', dhuhr: '12:13', maghrib: '6:21', midnight: '11:32' },
            { day: 20, date: '10 آذار', mDate: '2026-03-10', imsak: '4:47', fajr: '4:57', sunrise: '6:19', dhuhr: '12:13', maghrib: '6:22', midnight: '11:32' },
            { day: 21, date: '11 آذار', mDate: '2026-03-11', imsak: '4:46', fajr: '4:56', sunrise: '6:18', dhuhr: '12:13', maghrib: '6:23', midnight: '11:32' },
            { day: 22, date: '12 آذار', mDate: '2026-03-12', imsak: '4:45', fajr: '4:55', sunrise: '6:17', dhuhr: '12:12', maghrib: '6:23', midnight: '11:32' },
            { day: 23, date: '13 آذار', mDate: '2026-03-13', imsak: '4:43', fajr: '4:53', sunrise: '6:16', dhuhr: '12:12', maghrib: '6:24', midnight: '11:31' },
            { day: 24, date: '14 آذار', mDate: '2026-03-14', imsak: '4:42', fajr: '4:52', sunrise: '6:14', dhuhr: '12:12', maghrib: '6:25', midnight: '11:31' },
            { day: 25, date: '15 آذار', mDate: '2026-03-15', imsak: '4:41', fajr: '4:51', sunrise: '6:13', dhuhr: '12:12', maghrib: '6:26', midnight: '11:31' },
            { day: 26, date: '16 آذار', mDate: '2026-03-16', imsak: '4:39', fajr: '4:49', sunrise: '6:12', dhuhr: '12:11', maghrib: '6:26', midnight: '11:30' },
            { day: 27, date: '17 آذار', mDate: '2026-03-17', imsak: '4:38', fajr: '4:48', sunrise: '6:11', dhuhr: '12:11', maghrib: '6:27', midnight: '11:30' },
            { day: 28, date: '18 آذار', mDate: '2026-03-18', imsak: '4:37', fajr: '4:47', sunrise: '6:09', dhuhr: '12:11', maghrib: '6:28', midnight: '11:30' },
            { day: 29, date: '19 آذار', mDate: '2026-03-19', imsak: '4:35', fajr: '4:45', sunrise: '6:08', dhuhr: '12:10', maghrib: '6:28', midnight: '11:29' },
            { day: 30, date: '20 آذار', mDate: '2026-03-20', imsak: '4:34', fajr: '4:44', sunrise: '6:07', dhuhr: '12:10', maghrib: '6:29', midnight: '11:29' }
        ];
        <div id="content-quran" class="hidden-section space-y-4">
    <div class="bg-[#0A1224] rounded-[2.5rem] border border-white/5 p-8 text-center">
        <div class="w-16 h-16 bg-amber-500/10 rounded-full flex items-center justify-center mx-auto mb-4">
            <i data-lucide="music" class="text-amber-500 w-8 h-8"></i>
        </div>
        <h3 class="text-xl font-bold mb-6 text-amber-500">الختمة الكاملة</h3>
        
        <audio id="quran-player" src="https://github.com/ossamasal2012/q/releases/download/v1.0/q.webm"></audio>

        <div class="flex items-center justify-center gap-6">
            <button onclick="skipTime(-10)" class="p-3 bg-white/5 rounded-full hover:bg-white/10 transition-all">
                <i data-lucide="rotate-ccw" class="w-6 h-6 text-white/70"></i>
            </button>

            <button id="quran-play-btn" onclick="toggleQuran()" class="w-16 h-16 bg-amber-500 rounded-full flex items-center justify-center text-[#050B18]">
                <i id="quran-icon" data-lucide="play" class="w-8 h-8 fill-current"></i>
            </button>

            <button onclick="skipTime(10)" class="p-3 bg-white/5 rounded-full hover:bg-white/10 transition-all">
                <i data-lucide="rotate-cw" class="w-6 h-6 text-white/70"></i>
            </button>
        </div>
        
        <div class="mt-8 w-full bg-white/10 h-1.5 rounded-full">
            <div id="quran-progress" class="bg-amber-500 h-full w-0 rounded-full transition-all"></div>
        </div>
    </div>
</div>

        const azkar = ["اللَّهُمَّ صَلِّ عَلَى مُحَمَّدٍ", "أستغفر الله", "سبحان الله و الحمد الله و الله أكبر", "سبحان الله وبحمده", "لا حول ولا قوة إلا بالله"];
        const audio = document.getElementById('athan-audio');
        const stopBtn = document.getElementById('stop-btn');

        function stopAthan() { audio.pause(); audio.currentTime = 0; stopBtn.classList.add('hidden'); }
        function testAthan() { audio.play(); stopBtn.classList.remove('hidden'); }

        async function enableAudioAndStart() {
            try { await audio.play(); audio.pause(); } catch(e) {}
            document.getElementById('audio-overlay').style.display = 'none';
            setInterval(updateCore, 1000);
        }

        function parseTime(t, isPM) {
            const [h, m] = t.split(':').map(Number);
            let d = new Date();
            let hh = isPM && h < 12 ? h + 12 : (!isPM && h === 12 ? 0 : h);
            d.setHours(hh, m, 0, 0);
            return d;
        }

        function updateCore() {
            const now = new Date();
            document.getElementById('live-clock').innerText = now.toLocaleTimeString('ar-EG', {hour12:false});
            const dateKey = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}-${String(now.getDate()).padStart(2,'0')}`;
            const today = imsakiaData.find(d => d.mDate === dateKey) || imsakiaData[0];

            const times = [
                { name: 'الفجر', t: parseTime(today.fajr, false) },
                { name: 'الظهر', t: parseTime(today.dhuhr, true) },
                { name: 'المغرب', t: parseTime(today.maghrib, true) }
            ];

            let next = times.find(p => p.t > now);
            if (!next) {
                next = { name: 'الفجر', t: parseTime(imsakiaData[0].fajr, false) };
                next.t.setDate(next.t.getDate() + 1);
            }

            const diff = next.t - now;
            const h = Math.floor(diff / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);

            document.getElementById('prayer-name').innerText = next.name;
            document.getElementById('countdown-timer').innerText = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
            document.getElementById('next-prayer-time').innerText = "موعد الصلاة: " + next.t.toLocaleTimeString('ar-EG', {hour:'2-digit', minute:'2-digit'});

            if (h === 0 && m === 0 && s === 0) { audio.play(); stopBtn.classList.remove('hidden'); }
        }

        function initApp() {
            const tbody = document.getElementById('imsakia-body');
            tbody.innerHTML = imsakiaData.map(r => `
                <tr class="border-b border-white/5">
                    <td class="p-3 font-bold text-amber-500">${r.day}</td>
                    <td class="p-3">${r.date}</td>
                    <td class="p-3 font-mono opacity-50">${r.imsak}</td>
                    <td class="p-3 font-mono">${r.fajr}</td>
                    <td class="p-3 font-mono opacity-50">${r.sunrise}</td>
                    <td class="p-3 font-mono">${r.dhuhr}</td>
                    <td class="p-3 font-mono font-bold text-amber-400">${r.maghrib}</td>
                    <td class="p-3 font-mono opacity-50">${r.midnight}</td>
                </tr>
            `).join('');

            const sList = document.getElementById('subha-list');
            sList.innerHTML = azkar.map((z, i) => {
                const c = localStorage.getItem(`s_${i}`) || 0;
                return `<div onclick="inc(${i})" class="tasbih-card bg-white/5 p-6 rounded-[2rem] flex justify-between items-center">
                    <span class="font-bold text-sm">${z}</span>
                    <span id="c_${i}" class="text-2xl font-black text-amber-500">${c}</span>
                </div>`;
            }).join('');
            lucide.createIcons();
        }

        function inc(i) {
            let c = parseInt(localStorage.getItem(`s_${i}`) || 0) + 1;
            localStorage.setItem(`s_${i}`, c);
            document.getElementById(`c_${i}`).innerText = c;
            if (window.navigator.vibrate) window.navigator.vibrate(40);
        }

        function resetTasbih() { if(confirm("تصفير العداد؟")) { azkar.forEach((_,i)=>localStorage.setItem(`s_${i}`,0)); initApp(); } }

 function switchTab(t) {
    // أسماء كل الأقسام عندنا
    const sections = ['imsakia', 'subha', 'quran'];
    
    sections.forEach(s => {
        const content = document.getElementById(`content-${s}`);
        const tab = document.getElementById(`tab-${s}`);
        
        if (s === t) {
            content.classList.remove('hidden-section');
            tab.className = 'flex-1 py-3 rounded-xl tab-active font-bold flex items-center justify-center gap-2';
        } else {
            content.classList.add('hidden-section');
            tab.className = 'flex-1 py-3 rounded-xl text-white/40 font-bold flex items-center justify-center gap-2';
        }
    });
    lucide.createIcons(); // تحديث الأيقونات
}
        // التحكم في مشغل القرآن
const qp = document.getElementById('quran-player');

function toggleQuran() {
    const icon = document.getElementById('quran-icon');
    if (qp.paused) {
        qp.play();
        icon.setAttribute('data-lucide', 'pause');
    } else {
        qp.pause();
        icon.setAttribute('data-lucide', 'play');
    }
    lucide.createIcons();
}

function skipTime(s) {
    qp.currentTime += s;
}

// لتحديث شريط التحميل تلقائياً
qp.ontimeupdate = () => {
    const prog = (qp.currentTime / qp.duration) * 100;
    document.getElementById('quran-progress').style.width = prog + '%';
};

        window.onload = initApp;
    </script>
</body>
</html>
